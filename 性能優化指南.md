# EatMove æ€§èƒ½å„ªåŒ–æŒ‡å—

## ğŸš€ æœ¬åœ°é–‹ç™¼æ€§èƒ½å„ªåŒ–

### 1. æ¸…ç†å°ˆæ¡ˆæª”æ¡ˆ

å·²æ¸…ç†çš„æª”æ¡ˆé¡å‹ï¼š

- âœ… æ¸¬è©¦æª”æ¡ˆ (`test-*.js`, `check-*.js`)
- âœ… è‡¨æ™‚æ–‡æª” (`*.html`, `*-report.md`)
- âœ… Next.js å¿«å– (`.next` ç›®éŒ„)
- âœ… Node.js å¿«å–

### 2. Next.js é…ç½®å„ªåŒ–

#### å·²å•Ÿç”¨çš„å„ªåŒ–åŠŸèƒ½ï¼š

```javascript
// next.config.js ä¸­çš„é—œéµå„ªåŒ–
{
  experimental: {
    turbo: true,           // å•Ÿç”¨ Turbopack
    optimizeFonts: true,   // å­—é«”å„ªåŒ–
    swcMinify: true        // SWC ç·¨è­¯å™¨
  },

  webpack: {
    cache: 'filesystem',   // æª”æ¡ˆç³»çµ±å¿«å–
    watchOptions: {        // ç›£æ§å„ªåŒ–
      poll: 1000,
      aggregateTimeout: 300
    }
  }
}
```

### 3. é–‹ç™¼ç’°å¢ƒå„ªåŒ–æ­¥é©Ÿ

#### æ­¥é©Ÿ 1: é‡æ–°å®‰è£ä¾è³´

```bash
# æ¸…ç†ä¸¦é‡æ–°å®‰è£
npm ci
```

#### æ­¥é©Ÿ 2: æ¸…ç†å¿«å–

```bash
# æ¸…ç† Next.js å¿«å–
rm -rf .next

# æ¸…ç† npm å¿«å–
npm cache clean --force
```

#### æ­¥é©Ÿ 3: å„ªåŒ–å•Ÿå‹•

```bash
# ä½¿ç”¨å„ªåŒ–æ¨¡å¼å•Ÿå‹•
npm run dev
```

### 4. ç³»çµ±å±¤ç´šå„ªåŒ–

#### Windows ç³»çµ±å„ªåŒ–ï¼š

1. **é—œé–‰ä¸å¿…è¦çš„ç¨‹å¼**

   - é—œé–‰ç€è¦½å™¨å¤šé¤˜åˆ†é 
   - é—œé–‰å…¶ä»–é–‹ç™¼å·¥å…·
   - æš«åœé˜²æ¯’è»Ÿé«”å³æ™‚æƒæ

2. **å¢åŠ è™›æ“¬è¨˜æ†¶é«”**

   ```
   æ§åˆ¶å° â†’ ç³»çµ± â†’ é€²éšç³»çµ±è¨­å®š â†’ æ•ˆèƒ½è¨­å®š â†’ é€²éš â†’ è™›æ“¬è¨˜æ†¶é«”
   å»ºè­°è¨­å®š: åˆå§‹å¤§å° 4096MBï¼Œæœ€å¤§å€¼ 8192MB
   ```

3. **æ’é™¤è³‡æ–™å¤¾æƒæ**
   - å°‡å°ˆæ¡ˆè³‡æ–™å¤¾åŠ å…¥é˜²æ¯’è»Ÿé«”æ’é™¤æ¸…å–®
   - æ’é™¤ `node_modules` å’Œ `.next` è³‡æ–™å¤¾

#### ç¡¬é«”å»ºè­°ï¼š

- **RAM**: è‡³å°‘ 8GBï¼Œå»ºè­° 16GB
- **SSD**: ä½¿ç”¨ SSD ç¡¬ç¢Ÿå­˜æ”¾å°ˆæ¡ˆ
- **CPU**: å¤šæ ¸å¿ƒè™•ç†å™¨æ•ˆæœæ›´ä½³

### 5. é–‹ç™¼å·¥å…·å„ªåŒ–

#### VS Code è¨­å®šï¼š

```json
// .vscode/settings.json
{
  "typescript.preferences.includePackageJsonAutoImports": "off",
  "typescript.suggest.autoImports": false,
  "files.watcherExclude": {
    "**/node_modules/**": true,
    "**/.next/**": true,
    "**/dist/**": true
  },
  "search.exclude": {
    "**/node_modules": true,
    "**/.next": true,
    "**/dist": true
  }
}
```

#### ç€è¦½å™¨å„ªåŒ–ï¼š

- ä½¿ç”¨ Chrome DevTools çš„ Performance åˆ†é ç›£æ§
- å•Ÿç”¨ React Developer Tools
- é—œé–‰ä¸å¿…è¦çš„ç€è¦½å™¨æ“´å……åŠŸèƒ½

### 6. ç¨‹å¼ç¢¼å±¤ç´šå„ªåŒ–

#### React çµ„ä»¶å„ªåŒ–ï¼š

```typescript
// ä½¿ç”¨ React.memo é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
const OptimizedComponent = React.memo(({ data }) => {
  return <div>{data}</div>;
});

// ä½¿ç”¨ useMemo å¿«å–è¨ˆç®—çµæœ
const expensiveValue = useMemo(() => {
  return heavyCalculation(data);
}, [data]);

// ä½¿ç”¨ useCallback å¿«å–å‡½æ•¸
const handleClick = useCallback(() => {
  // è™•ç†é»æ“Š
}, [dependency]);
```

#### åœ–ç‰‡å„ªåŒ–ï¼š

```typescript
// ä½¿ç”¨ Next.js Image çµ„ä»¶
import Image from "next/image";

<Image
  src="/image.jpg"
  alt="æè¿°"
  width={500}
  height={300}
  priority={true} // é‡è¦åœ–ç‰‡å„ªå…ˆè¼‰å…¥
  placeholder="blur" // æ¨¡ç³Šé è¼‰å…¥
/>;
```

### 7. è³‡æ–™åº«é€£æ¥å„ªåŒ–

#### é€£æ¥æ± è¨­å®šï¼š

```typescript
// lib/db.ts
const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
  max: 20, // æœ€å¤§é€£æ¥æ•¸
  idleTimeoutMillis: 30000,
  connectionTimeoutMillis: 2000,
});
```

### 8. API è·¯ç”±å„ªåŒ–

#### å¿«å–ç­–ç•¥ï¼š

```typescript
// API è·¯ç”±ä¸­ä½¿ç”¨å¿«å–
export async function GET(request: Request) {
  const { searchParams } = new URL(request.url);
  const cacheKey = searchParams.toString();

  // æª¢æŸ¥å¿«å–
  const cached = cache.get(cacheKey);
  if (cached) {
    return NextResponse.json(cached);
  }

  // æŸ¥è©¢è³‡æ–™åº«
  const data = await fetchData();

  // è¨­å®šå¿«å–
  cache.set(cacheKey, data, 300); // 5åˆ†é˜å¿«å–

  return NextResponse.json(data);
}
```

### 9. ç›£æ§å’Œé™¤éŒ¯

#### æ€§èƒ½ç›£æ§å·¥å…·ï¼š

```bash
# å®‰è£æ€§èƒ½åˆ†æå·¥å…·
npm install --save-dev @next/bundle-analyzer

# åˆ†æ bundle å¤§å°
npm run analyze
```

#### é–‹ç™¼æ™‚ç›£æ§ï¼š

```typescript
// ç›£æ§çµ„ä»¶æ¸²æŸ“æ™‚é–“
const ComponentWithProfiling = () => {
  const startTime = performance.now();

  useEffect(() => {
    const endTime = performance.now();
    console.log(`çµ„ä»¶æ¸²æŸ“æ™‚é–“: ${endTime - startTime}ms`);
  });

  return <YourComponent />;
};
```

### 10. å¸¸è¦‹å•é¡Œè§£æ±º

#### å•é¡Œ 1: é¦–æ¬¡è¼‰å…¥ç·©æ…¢

**è§£æ±ºæ–¹æ¡ˆï¼š**

- æª¢æŸ¥ç¶²è·¯é€£æ¥
- æ¸…ç†ç€è¦½å™¨å¿«å–
- é‡æ–°å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨

#### å•é¡Œ 2: ç†±é‡è¼‰ç·©æ…¢

**è§£æ±ºæ–¹æ¡ˆï¼š**

```bash
# æ¸›å°‘ç›£æ§çš„æª”æ¡ˆ
echo "node_modules/" >> .gitignore
echo ".next/" >> .gitignore
```

#### å•é¡Œ 3: è¨˜æ†¶é«”ä½¿ç”¨éé«˜

**è§£æ±ºæ–¹æ¡ˆï¼š**

```bash
# å¢åŠ  Node.js è¨˜æ†¶é«”é™åˆ¶
export NODE_OPTIONS="--max-old-space-size=4096"
npm run dev
```

### 11. æ•ˆèƒ½åŸºæº–æ¸¬è©¦

#### ç›®æ¨™æŒ‡æ¨™ï¼š

- **é¦–æ¬¡è¼‰å…¥**: < 3 ç§’
- **é é¢åˆ‡æ›**: < 1 ç§’
- **API éŸ¿æ‡‰**: < 500ms
- **åœ–ç‰‡è¼‰å…¥**: < 2 ç§’

#### æ¸¬è©¦å‘½ä»¤ï¼š

```bash
# Lighthouse æ¸¬è©¦
npx lighthouse http://localhost:3001 --view

# Bundle åˆ†æ
npm run build
npm run analyze
```

### 12. æŒçºŒå„ªåŒ–å»ºè­°

1. **å®šæœŸæ¸…ç†**

   - æ¯é€±æ¸…ç†ä¸€æ¬¡ `.next` å¿«å–
   - æ¯æœˆæ›´æ–°ä¾è³´å¥—ä»¶
   - å®šæœŸæª¢æŸ¥ bundle å¤§å°

2. **ç›£æ§æŒ‡æ¨™**

   - ä½¿ç”¨ Web Vitals ç›£æ§
   - è¨­å®šæ€§èƒ½é ç®—
   - å®šæœŸé€²è¡Œæ€§èƒ½æ¸¬è©¦

3. **ç¨‹å¼ç¢¼å¯©æŸ¥**
   - æª¢æŸ¥ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
   - å„ªåŒ–è³‡æ–™åº«æŸ¥è©¢
   - ç§»é™¤æœªä½¿ç”¨çš„ç¨‹å¼ç¢¼

---

## ğŸ¯ å¿«é€Ÿå„ªåŒ–æª¢æŸ¥æ¸…å–®

- [ ] æ¸…ç†è‡¨æ™‚æª”æ¡ˆå’Œæ¸¬è©¦æª”æ¡ˆ
- [ ] æ›´æ–° Next.js é…ç½®
- [ ] é‡æ–°å®‰è£ä¾è³´ (`npm ci`)
- [ ] æ¸…ç†å¿«å– (`rm -rf .next`)
- [ ] è¨­å®š VS Code å„ªåŒ–
- [ ] é…ç½®ç€è¦½å™¨é–‹ç™¼å·¥å…·
- [ ] æª¢æŸ¥ç³»çµ±è³‡æºä½¿ç”¨
- [ ] æ¸¬è©¦è¼‰å…¥é€Ÿåº¦
- [ ] ç›£æ§è¨˜æ†¶é«”ä½¿ç”¨
- [ ] è¨­å®šæ€§èƒ½ç›£æ§

åŸ·è¡Œé€™äº›æ­¥é©Ÿå¾Œï¼Œæ‚¨çš„ EatMove å°ˆæ¡ˆæ‡‰è©²æœƒæœ‰é¡¯è‘—çš„æ€§èƒ½æå‡ï¼
