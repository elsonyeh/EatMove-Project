(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5075],{1852:(e,t,r)=>{"use strict";r.d(t,{MobileNav:()=>k});var a=r(5155),s=r(6874),n=r.n(s),i=r(5695),l=r(3999),o=r(7340),d=r(1976),c=r(4186),m=r(7809),u=r(4783),f=r(7168),x=r(2115),h=r(5452),p=r(2085),b=r(4416);let g=h.bL,v=h.l9;h.bm;let y=h.ZL,N=x.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(h.hJ,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:t})});N.displayName=h.hJ.displayName;let j=(0,p.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),w=x.forwardRef((e,t)=>{let{side:r="right",className:s,children:n,...i}=e;return(0,a.jsxs)(y,{children:[(0,a.jsx)(N,{}),(0,a.jsxs)(h.UC,{ref:t,className:(0,l.cn)(j({side:r}),s),...i,children:[n,(0,a.jsxs)(h.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(b.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});w.displayName=h.UC.displayName;let I=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};I.displayName="SheetHeader";let A=x.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(h.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold text-foreground",r),...s})});A.displayName=h.hE.displayName,x.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(h.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})}).displayName=h.VY.displayName;var C=r(2913),E=r(8145);function k(){let e=(0,i.usePathname)(),t=[{href:"/user/home",label:"首頁",icon:o.A,active:"/user/home"===e},{href:"/user/favorites",label:"我的最愛",icon:d.A,active:"/user/favorites"===e,badge:0},{href:"/user/recent",label:"近期瀏覽",icon:c.A,active:"/user/recent"===e},{href:"/user/cart",label:"購物車",icon:m.A,active:"/user/cart"===e,badge:3}];return(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsxs)(g,{children:[(0,a.jsx)(v,{asChild:!0,children:(0,a.jsxs)(f.$,{variant:"ghost",size:"icon",className:"text-brand-dark hover:text-brand-primary",children:[(0,a.jsx)(u.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{className:"sr-only",children:"開啟選單"})]})}),(0,a.jsxs)(w,{side:"left",className:"border-r-brand-primary/20",children:[(0,a.jsx)(I,{className:"mb-6",children:(0,a.jsx)(A,{children:(0,a.jsx)(C.F,{size:"lg"})})}),(0,a.jsx)("nav",{className:"flex flex-col gap-4",children:t.map(e=>(0,a.jsxs)(n(),{href:e.href,className:(0,l.cn)("flex items-center py-3 px-4 text-base font-medium transition-colors rounded-lg",e.active?"bg-brand-primary/10 text-brand-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[(0,a.jsx)(e.icon,{className:"mr-3 h-5 w-5"}),e.label,void 0!==e.badge&&e.badge>0&&(0,a.jsx)(E.E,{variant:"secondary",className:"ml-auto h-5 min-w-5 flex items-center justify-center rounded-full px-1.5 py-0.5 text-xs",children:e.badge})]},e.href))})]})]})})}},2032:(e,t,r)=>{"use strict";r.d(t,{MainNav:()=>h});var a=r(5155),s=r(6874),n=r.n(s),i=r(5695),l=r(3999),o=r(7340),d=r(1976),c=r(4186),m=r(7809),u=r(7168),f=r(2643);function x(e){let{className:t}=e,{getTotalItems:r,mounted:s}=(0,f._)(),i=s?r():0;return(0,a.jsx)(n(),{href:"/user/cart",children:(0,a.jsxs)(u.$,{variant:"ghost",size:"icon",className:(0,l.cn)("relative",t),"aria-label":"購物車，".concat(i," 件商品"),children:[(0,a.jsx)(m.A,{className:"h-5 w-5"}),i>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-brand-primary text-white text-xs font-medium rounded-full h-5 min-w-5 flex items-center justify-center",children:i})]})})}function h(){let e=(0,i.usePathname)(),t=[{href:"/user/home",label:"首頁",icon:o.A,active:"/user/home"===e},{href:"/user/favorites",label:"我的最愛",icon:d.A,active:"/user/favorites"===e},{href:"/user/recent",label:"近期瀏覽",icon:c.A,active:"/user/recent"===e}];return(0,a.jsxs)("nav",{className:"hidden md:flex items-center space-x-6 lg:space-x-8",children:[t.map(e=>(0,a.jsxs)(n(),{href:e.href,className:(0,l.cn)("flex items-center text-sm font-medium transition-colors hover:text-brand-primary relative group",e.active?"text-brand-primary":"text-muted-foreground"),children:[(0,a.jsx)(e.icon,{className:(0,l.cn)("mr-2 h-5 w-5 transition-all",e.active?"text-brand-primary":"text-muted-foreground group-hover:text-brand-primary")}),(0,a.jsx)("span",{children:e.label}),e.active&&(0,a.jsx)("span",{className:"absolute -bottom-1.5 left-0 right-0 h-0.5 bg-brand-primary rounded-full"})]},e.href)),(0,a.jsxs)("div",{className:"flex items-center text-sm font-medium transition-colors hover:text-brand-primary relative group",children:[(0,a.jsx)(x,{className:"/user/cart"===e?"text-brand-primary":"text-muted-foreground"}),(0,a.jsx)("span",{className:"ml-2",children:"購物車"}),"/user/cart"===e&&(0,a.jsx)("span",{className:"absolute -bottom-1.5 left-0 right-0 h-0.5 bg-brand-primary rounded-full"})]})]})}},2643:(e,t,r)=>{"use strict";r.d(t,{_:()=>l});var a=r(2115),s=r(3952),n=r(4503);let i={items:[],restaurantId:null,restaurantName:null};function l(){let{toast:e}=(0,n.dj)(),[t,r]=(0,a.useState)(!1),[l,o]=(0,s.M)("eatmove-cart",i);return(0,a.useEffect)(()=>{r(!0)},[]),{cart:l,addItem:function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t&&(o(t=>{if(0===t.items.length)return{...t,restaurantId:r.restaurantId,restaurantName:r.restaurantName,items:[{...r,quantity:a}]};if(t.restaurantId&&t.restaurantId!==r.restaurantId)return e({title:"無法添加商品",description:"您的購物車中已有來自 ".concat(t.restaurantName," 的商品。請先清空購物車或完成當前訂單。"),variant:"destructive"}),t;let s=t.items.findIndex(e=>e.id===r.id);if(s>-1){let e=[...t.items];return e[s].quantity+=a,{...t,items:e}}return{...t,items:[...t.items,{...r,quantity:a}]}}),e({title:"已添加到購物車",description:"".concat(r.name," x ").concat(a," 已添加到您的購物車")}))},removeItem:r=>{t&&(o(e=>{let t=e.items.filter(e=>e.id!==r);return 0===t.length?i:{...e,items:t}}),e({title:"已從購物車移除",description:"商品已從購物車中移除"}))},updateQuantity:(e,r)=>{t&&!(r<1)&&o(t=>{let a=t.items.map(t=>t.id===e?{...t,quantity:r}:t);return{...t,items:a}})},clearCart:()=>{t&&(o(i),e({title:"購物車已清空",description:"所有商品已從購物車中移除"}))},getSubtotal:()=>l.items.reduce((e,t)=>e+t.price*t.quantity,0),getTotalItems:()=>l.items.reduce((e,t)=>e+t.quantity,0),isInCart:e=>l.items.some(t=>t.id===e),getItemQuantity:e=>{let t=l.items.find(t=>t.id===e);return t?t.quantity:0},mounted:t}}},2913:(e,t,r)=>{"use strict";r.d(t,{F:()=>d});var a=r(5155),s=r(6874),n=r.n(s),i=r(5747),l=r(2138);let o=e=>(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",...e,children:(0,a.jsx)("path",{d:"M18.18,10l-1.7-4.68C16.19,4.53,15.44,4,14.6,4H12v2h2.6l1.46,4h-4.81l-0.36-1H12V7H7v2h1.75l1.82,5H9.9 c-0.44-2.23-2.31-3.88-4.65-3.99C2.45,9.87,0,12.2,0,15c0,2.8,2.2,5,5,5c2.46,0,4.45-1.69,4.9-4h4.2c0.44,2.23,2.31,3.88,4.65,3.99 c2.8,0.13,5.25-2.19,5.25-5c0-2.8-2.2-5-5-5H18.18z M7.82,16c-0.4,1.17-1.49,2-2.82,2c-1.68,0-3-1.32-3-3s1.32-3,3-3 c1.33,0,2.42,0.83,2.82,2H5v2H7.82z M14.1,14h-1.4l-0.73-2H15C14.56,12.58,14.24,13.25,14.1,14z M19,18c-1.68,0-3-1.32-3-3 c0-0.93,0.41-1.73,1.05-2.28l0.96,2.64l1.88-0.68l-0.97-2.67c0.03,0,0.06-0.01,0.09-0.01c1.68,0,3,1.32,3,3S20.68,18,19,18z"})});function d(e){let{variant:t="default",size:r="md",href:s="/user/home"}=e,d=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(i.A,{className:"text-brand-primary ".concat("sm"===r?"h-5 w-5":"md"===r?"h-6 w-6":"h-8 w-8")})}),"default"===t&&(0,a.jsxs)("div",{className:"flex items-center ".concat({sm:"text-lg",md:"text-2xl",lg:"text-3xl"}[r]),children:[(0,a.jsx)("span",{className:"text-brand-primary",children:"Eat"}),(0,a.jsx)(l.A,{className:"".concat("sm"===r?"h-3 w-3":"md"===r?"h-4 w-4":"h-5 w-5"," text-brand-secondary mx-0.5")}),(0,a.jsx)("span",{className:"text-brand-secondary",children:"Move"}),(0,a.jsx)(o,{className:"".concat("sm"===r?"h-5 w-5":"md"===r?"h-6 w-6":"h-8 w-8"," text-brand-secondary ml-1")})]})]});return null===s?(0,a.jsx)("div",{className:"flex items-center gap-1.5 font-bold",children:d}):(0,a.jsx)(n(),{href:s,className:"flex items-center gap-1.5 font-bold",children:d})}},3952:(e,t,r)=>{"use strict";r.d(t,{M:()=>s});var a=r(2115);function s(e,t){let[r,s]=(0,a.useState)(()=>{try{let r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(e){return console.error(e),t}});return(0,a.useEffect)(()=>{let t=t=>{t.key===e&&t.newValue&&s(JSON.parse(t.newValue))};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[e]),[r,t=>{try{let a=t instanceof Function?t(r):t;s(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(e){console.error(e)}}]}},8145:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var a=r(5155);r(2115);var s=r(2085),n=r(3999);let i=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...s})}},9360:(e,t,r)=>{Promise.resolve().then(r.bind(r,2032)),Promise.resolve().then(r.bind(r,1852)),Promise.resolve().then(r.bind(r,6658)),Promise.resolve().then(r.t.bind(r,6874,23))}},e=>{var t=t=>e(e.s=t);e.O(0,[9352,4052,6441,8250,5061,8567,3549,6658,8441,1684,7358],()=>t(9360)),_N_E=e.O()}]);