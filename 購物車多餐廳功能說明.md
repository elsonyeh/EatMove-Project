# 購物車多餐廳功能說明

## 🎯 新增功能概述

為了改善用戶體驗，購物車系統現在支援多餐廳顯示、選擇和管理功能。

## ✨ 主要功能

### 1. 多餐廳商品顯示

- **按餐廳分組**：購物車中的商品會按餐廳自動分組顯示
- **餐廳資訊**：每個分組顯示餐廳名稱、商品數量和總價
- **視覺標識**：多餐廳情況下會顯示橙色警告標籤

### 2. 不同餐廳警告系統

- **自動檢測**：系統會自動檢測購物車中是否有來自不同餐廳的商品
- **警告提示**：顯示明顯的橙色警告框，提醒用戶一次只能選擇一家餐廳
- **友好說明**：提供清楚的指示說明如何處理多餐廳商品

### 3. 餐廳一鍵選取功能

- **核取方塊選擇**：每個餐廳分組都有核取方塊，可以勾選要結帳的餐廳
- **一鍵選取按鈕**：每個餐廳分組都有「選擇此餐廳」按鈕，一鍵選取該餐廳所有商品
- **視覺反饋**：選中的餐廳會有藍色邊框高亮顯示

### 4. 智能結帳控制

- **單餐廳模式**：只有一家餐廳時，正常顯示結帳按鈕
- **多餐廳模式**：
  - 未選擇餐廳：按鈕顯示「請選擇餐廳」並禁用
  - 選擇多家餐廳：按鈕顯示「請只選擇一家餐廳」並禁用
  - 選擇一家餐廳：按鈕正常啟用，可以進行結帳

## 🔧 技術實現

### API 修改

- **購物車 API**：移除了自動清空不同餐廳商品的邏輯，允許多餐廳商品共存
- **結帳頁面**：支援餐廳參數過濾，只顯示選中餐廳的商品

### 前端改進

- **購物車頁面**：完全重寫，支援餐廳分組、選擇和警告功能
- **結帳頁面**：支援 URL 參數 `?restaurant={rid}` 來過濾特定餐廳的商品

## 📱 用戶操作流程

### 多餐廳情況下的結帳流程：

1. 進入購物車頁面
2. 看到橙色警告提示
3. 查看各餐廳的商品分組
4. 有兩種選擇方式：
   - **方式一**：勾選想要的餐廳核取方塊
   - **方式二**：點擊「選擇此餐廳」按鈕
5. 確認選擇後，點擊「前往結帳」
6. 系統會跳轉到結帳頁面，只顯示選中餐廳的商品

## 🧪 測試資料

已創建測試用戶 **M000010** 的多餐廳購物車：

- **餐廳 23 - 50 年杏仁茶**：
  - 杏仁茶 x 2 = $150
  - 火腿吐司 x 1 = $40
- **餐廳 7 - 千義 PASTA**：
  - 白醬培根義大利麵 x 1 = $175
  - 波隆那肉醬義大利麵 x 2 = $400

## 🎨 UI/UX 特色

- **色彩設計**：使用橙色系統來表示警告和多餐廳狀態
- **互動回饋**：選中餐廳有視覺高亮效果
- **響應式設計**：在不同螢幕尺寸下都能良好顯示
- **無障礙設計**：使用適當的 ARIA 標籤和顏色對比

## 🔜 後續優化建議

1. **餐廳距離顯示**：在餐廳分組中顯示距離資訊
2. **預計送達時間**：不同餐廳可能有不同的送達時間
3. **最低消費提醒**：各餐廳的最低消費要求提示
4. **外送費計算**：不同餐廳可能有不同的外送費
