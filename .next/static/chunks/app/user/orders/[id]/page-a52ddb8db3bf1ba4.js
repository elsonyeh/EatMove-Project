(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5318],{1135:(e,s,a)=>{"use strict";a.d(s,{w:()=>m});var l=a(5155),r=a(2115),t=a(3655),i="horizontal",n=["horizontal","vertical"],d=r.forwardRef((e,s)=>{var a;let{decorative:r,orientation:d=i,...c}=e,m=(a=d,n.includes(a))?d:i;return(0,l.jsx)(t.sG.div,{"data-orientation":m,...r?{role:"none"}:{"aria-orientation":"vertical"===m?m:void 0,role:"separator"},...c,ref:s})});d.displayName="Separator";var c=a(3999);let m=r.forwardRef((e,s)=>{let{className:a,orientation:r="horizontal",decorative:t=!0,...i}=e;return(0,l.jsx)(d,{ref:s,decorative:t,orientation:r,className:(0,c.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...i})});m.displayName=d.displayName},4186:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(9946).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5024:(e,s,a)=>{Promise.resolve().then(a.bind(a,6276))},6276:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>E});var l=a(5155),r=a(2115),t=a(5695),i=a(6766),n=a(7168),d=a(8482),c=a(8145),m=a(1135),x=a(4964),o=a(9663),h=a(4503),u=a(9840),j=a(9474),p=a(8564);function f(e){let{open:s,onOpenChange:a}=e,{toast:t}=(0,h.dj)(),[i,d]=(0,r.useState)(0),[c,m]=(0,r.useState)(0),[x,o]=(0,r.useState)("");return(0,l.jsx)(u.lG,{open:s,onOpenChange:a,children:(0,l.jsxs)(u.Cf,{className:"sm:max-w-[500px]",children:[(0,l.jsxs)(u.c7,{children:[(0,l.jsx)(u.L3,{children:"評分此訂單"}),(0,l.jsx)(u.rr,{children:"請為餐廳和外送員評分，您的意見對我們很重要"})]}),(0,l.jsxs)("div",{className:"space-y-6 py-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h3",{className:"font-medium",children:"餐廳評分"}),(0,l.jsx)("div",{className:"flex items-center",children:[1,2,3,4,5].map(e=>(0,l.jsxs)("button",{type:"button",className:"p-1",onClick:()=>d(e),children:[(0,l.jsx)(p.A,{className:"h-8 w-8 ".concat(e<=i?"fill-yellow-400 text-yellow-400":"text-muted-foreground")}),(0,l.jsxs)("span",{className:"sr-only",children:[e," 星"]})]},e))})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h3",{className:"font-medium",children:"外送員評分"}),(0,l.jsx)("div",{className:"flex items-center",children:[1,2,3,4,5].map(e=>(0,l.jsxs)("button",{type:"button",className:"p-1",onClick:()=>m(e),children:[(0,l.jsx)(p.A,{className:"h-8 w-8 ".concat(e<=c?"fill-yellow-400 text-yellow-400":"text-muted-foreground")}),(0,l.jsxs)("span",{className:"sr-only",children:[e," 星"]})]},e))})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h3",{className:"font-medium",children:"評論"}),(0,l.jsx)(j.T,{placeholder:"分享您的用餐體驗和外送體驗...",value:x,onChange:e=>o(e.target.value)})]})]}),(0,l.jsxs)(u.Es,{children:[(0,l.jsx)(n.$,{variant:"outline",onClick:()=>a(!1),children:"取消"}),(0,l.jsx)(n.$,{onClick:()=>{if(0===i||0===c){t({title:"請評分",description:"請為餐廳和外送員評分",variant:"destructive"});return}t({title:"評分已送出",description:"感謝您的評分和意見"}),a(!1)},children:"送出評分"})]})]})})}var N=a(5537),v=a(5518),g=a(4186),y=a(9946);let b=(0,y.A)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);var w=a(646);let k=(0,y.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var A=a(9420),C=a(1497),$=a(4516),z=a(5742);function E(){let{id:e}=(0,t.useParams)(),s=(0,t.useRouter)(),{toast:a}=(0,h.dj)(),[u,j]=(0,r.useState)("pending"),[y,E]=(0,r.useState)(!1),[R,T]=(0,r.useState)("status"),[Z]=(0,r.useState)([{id:"item-1",name:"北京烤鴨",price:580,quantity:1,image:"/placeholder.svg?height=64&width=64&text=北京烤鴨"},{id:"item-2",name:"宮保雞丁",price:220,quantity:1,image:"/placeholder.svg?height=64&width=64&text=宮保雞丁"}]),[B,S]=(0,r.useState)({name:"李小明",avatar:"/placeholder.svg?height=128&width=128&text=李小明",rating:4.8,vehicle:"機車",licensePlate:"ABC-1234",phone:"0912-345-678",estimatedArrival:"12:45 - 13:00",isVisible:!1}),V=Z.reduce((e,s)=>e+s.price*s.quantity,0);return(0,r.useEffect)(()=>{let e=setTimeout(()=>{j("preparing"),a({title:"訂單狀態更新",description:"餐廳已接受您的訂單，正在準備中"})},5e3),s=setTimeout(()=>{j("delivering"),a({title:"訂單狀態更新",description:"外送員已取餐，正在前往您的位置"}),S(e=>({...e,isVisible:!0})),T("map")},1e4),l=setTimeout(()=>{j("delivered"),a({title:"訂單已送達",description:"感謝您的訂購，請為本次服務評分"}),E(!0)},15e3);return()=>{clearTimeout(e),clearTimeout(s),clearTimeout(l)}},[a]),(0,l.jsxs)("div",{className:"container py-6",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)(n.$,{variant:"ghost",size:"sm",className:"mb-4",onClick:()=>s.push("/user/orders"),children:[(0,l.jsx)(k,{className:"mr-2 h-4 w-4"}),"返回訂單列表"]}),(0,l.jsx)("h1",{className:"text-3xl font-bold tracking-tight mb-2",children:"訂單詳情"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("p",{className:"text-muted-foreground mr-2",children:["訂單編號: #",e]}),(()=>{switch(u){case"pending":return(0,l.jsxs)(c.E,{variant:"secondary",className:"bg-brand-primary/20 text-brand-primary",children:[(0,l.jsx)(g.A,{className:"mr-1 h-3 w-3"}),"訂單處理中"]});case"preparing":return(0,l.jsxs)(c.E,{variant:"secondary",className:"bg-brand-secondary/20 text-brand-secondary",children:[(0,l.jsx)(g.A,{className:"mr-1 h-3 w-3"}),"餐點準備中"]});case"delivering":return(0,l.jsxs)(c.E,{variant:"secondary",className:"bg-brand-accent/20 text-brand-accent",children:[(0,l.jsx)(b,{className:"mr-1 h-3 w-3"}),"外送中"]});case"delivered":return(0,l.jsxs)(c.E,{variant:"secondary",className:"bg-green-100 text-green-700",children:[(0,l.jsx)(w.A,{className:"mr-1 h-3 w-3"}),"已送達"]});default:return(0,l.jsx)(c.E,{children:"未知狀態"})}})()]})]}),B.isVisible&&(0,l.jsx)(d.Zp,{className:"mb-6 border-brand-primary/20 bg-gradient-to-r from-brand-primary/5 to-transparent",children:(0,l.jsx)(d.Wu,{className:"p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)(o.eu,{className:"h-16 w-16 border-2 border-brand-primary/20",children:[(0,l.jsx)(o.BK,{src:B.avatar||"/placeholder.svg",alt:B.name}),(0,l.jsx)(o.q5,{className:"bg-brand-primary/10 text-brand-primary text-xl",children:B.name.charAt(0)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-bold",children:B.name}),(0,l.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,l.jsx)(p.A,{className:"h-4 w-4 text-yellow-500 fill-yellow-500 mr-1"}),(0,l.jsx)("span",{children:B.rating}),(0,l.jsx)("span",{className:"mx-2",children:"•"}),(0,l.jsx)("span",{children:B.vehicle}),(0,l.jsx)("span",{className:"mx-2",children:"•"}),(0,l.jsx)("span",{children:B.licensePlate})]}),"delivering"===u&&(0,l.jsxs)("p",{className:"text-sm mt-1 text-brand-primary font-medium",children:["預計 ",B.estimatedArrival," 送達"]})]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(n.$,{variant:"outline",size:"icon",className:"rounded-full h-10 w-10",children:[(0,l.jsx)(A.A,{className:"h-5 w-5 text-brand-primary"}),(0,l.jsx)("span",{className:"sr-only",children:"撥打電話"})]}),(0,l.jsxs)(n.$,{variant:"outline",size:"icon",className:"rounded-full h-10 w-10",onClick:()=>T("chat"),children:[(0,l.jsx)(C.A,{className:"h-5 w-5 text-brand-primary"}),(0,l.jsx)("span",{className:"sr-only",children:"傳送訊息"})]})]})]})})}),(0,l.jsxs)("div",{className:"grid gap-8 md:grid-cols-3",children:[(0,l.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,l.jsxs)(x.tU,{value:R,onValueChange:T,children:[(0,l.jsxs)(x.j7,{className:"grid w-full grid-cols-3",children:[(0,l.jsx)(x.Xi,{value:"status",children:"訂單狀態"}),(0,l.jsx)(x.Xi,{value:"map",children:"即時追蹤"}),(0,l.jsx)(x.Xi,{value:"chat",children:"聯絡外送員"})]}),(0,l.jsx)(x.av,{value:"status",className:"mt-6",children:(0,l.jsxs)(d.Zp,{children:[(0,l.jsxs)(d.aR,{children:[(0,l.jsx)(d.ZB,{children:"訂單狀態"}),(0,l.jsx)(d.BT,{children:"即時追蹤您的訂單"})]}),(0,l.jsx)(d.Wu,{children:(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,l.jsx)("div",{className:"bg-brand-primary h-2.5 rounded-full transition-all duration-500",style:{width:"".concat((()=>{switch(u){case"pending":return 25;case"preparing":return 50;case"delivering":return 75;case"delivered":return 100;default:return 0}})(),"%")}})}),(0,l.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"mx-auto w-10 h-10 rounded-full flex items-center justify-center mb-2 ".concat(u?"bg-brand-primary text-white":"bg-gray-200 text-gray-500"),children:(0,l.jsx)(g.A,{className:"h-5 w-5"})}),(0,l.jsx)("p",{className:"text-sm font-medium",children:"訂單處理中"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"mx-auto w-10 h-10 rounded-full flex items-center justify-center mb-2 ".concat("preparing"===u||"delivering"===u||"delivered"===u?"bg-brand-primary text-white":"bg-gray-200 text-gray-500"),children:(0,l.jsx)(w.A,{className:"h-5 w-5"})}),(0,l.jsx)("p",{className:"text-sm font-medium",children:"餐點準備中"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"mx-auto w-10 h-10 rounded-full flex items-center justify-center mb-2 ".concat("delivering"===u||"delivered"===u?"bg-brand-primary text-white":"bg-gray-200 text-gray-500"),children:(0,l.jsx)(b,{className:"h-5 w-5"})}),(0,l.jsx)("p",{className:"text-sm font-medium",children:"外送中"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"mx-auto w-10 h-10 rounded-full flex items-center justify-center mb-2 ".concat("delivered"===u?"bg-brand-primary text-white":"bg-gray-200 text-gray-500"),children:(0,l.jsx)(w.A,{className:"h-5 w-5"})}),(0,l.jsx)("p",{className:"text-sm font-medium",children:"已送達"})]})]}),(0,l.jsxs)("div",{className:"bg-muted/30 p-4 rounded-lg",children:[(0,l.jsx)("h3",{className:"font-medium mb-2",children:"預計送達時間"}),(0,l.jsx)("p",{className:"text-2xl font-bold",children:"delivered"===u?"已送達":"12:45 - 13:00"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-medium mb-2",children:"配送地址"}),(0,l.jsxs)("div",{className:"flex items-start",children:[(0,l.jsx)($.A,{className:"h-5 w-5 mr-2 mt-0.5 text-muted-foreground"}),(0,l.jsx)("p",{children:"台北市信義區信義路五段7號"})]})]})]})})]})}),(0,l.jsx)(x.av,{value:"map",className:"mt-6",children:(0,l.jsxs)(d.Zp,{children:[(0,l.jsxs)(d.aR,{children:[(0,l.jsx)(d.ZB,{children:"即時位置追蹤"}),(0,l.jsx)(d.BT,{children:"delivering"===u?"外送員正在前往您的位置":"delivered"===u?"訂單已送達":"訂單準備中"})]}),(0,l.jsxs)(d.Wu,{children:[(0,l.jsx)(v.n,{status:u}),"delivering"===u&&(0,l.jsx)("div",{className:"mt-4 p-4 bg-brand-primary/10 rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-medium",children:"預計送達時間"}),(0,l.jsx)("p",{className:"text-xl font-bold",children:B.estimatedArrival})]}),(0,l.jsxs)(n.$,{className:"bg-brand-primary hover:bg-brand-primary/90",children:[(0,l.jsx)(z.A,{className:"mr-2 h-4 w-4"}),"開啟導航"]})]})})]})]})}),(0,l.jsx)(x.av,{value:"chat",className:"mt-6",children:(0,l.jsxs)(d.Zp,{children:[(0,l.jsxs)(d.aR,{children:[(0,l.jsx)(d.ZB,{children:"與外送員聊天"}),(0,l.jsx)(d.BT,{children:B.isVisible?"與 ".concat(B.name," 聯絡"):"外送員尚未指派"})]}),(0,l.jsx)(d.Wu,{children:B.isVisible?(0,l.jsx)(N.s,{}):(0,l.jsx)("div",{className:"text-center py-12",children:(0,l.jsx)("p",{className:"text-muted-foreground",children:"外送員尚未指派，請稍候..."})})})]})})]}),(0,l.jsxs)(d.Zp,{children:[(0,l.jsx)(d.aR,{children:(0,l.jsx)(d.ZB,{children:"訂單內容"})}),(0,l.jsx)(d.Wu,{className:"space-y-4",children:Z.map(e=>(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("div",{className:"relative h-16 w-16 overflow-hidden rounded-md",children:(0,l.jsx)(i.default,{src:e.image||"/placeholder.svg",alt:e.name,fill:!0,className:"object-cover"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h3",{className:"font-medium",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"京華樓"})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("div",{className:"font-medium",children:["$",e.price," x ",e.quantity]}),(0,l.jsxs)("div",{className:"text-muted-foreground",children:["$",e.price*e.quantity]})]})]},e.id))})]})]}),(0,l.jsx)("div",{children:(0,l.jsxs)(d.Zp,{className:"sticky top-20",children:[(0,l.jsx)(d.aR,{children:(0,l.jsx)(d.ZB,{children:"訂單摘要"})}),(0,l.jsxs)(d.Wu,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{children:"小計"}),(0,l.jsxs)("span",{children:["$",V]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{children:"外送費"}),(0,l.jsxs)("span",{children:["$",60]})]}),(0,l.jsx)(m.w,{}),(0,l.jsxs)("div",{className:"flex justify-between font-medium",children:[(0,l.jsx)("span",{children:"總計"}),(0,l.jsxs)("span",{children:["$",V+60]})]})]}),(0,l.jsxs)(d.wL,{className:"flex flex-col gap-2",children:["delivered"===u?(0,l.jsx)(n.$,{className:"w-full",onClick:()=>E(!0),children:"評分訂單"}):(0,l.jsx)(n.$,{className:"w-full",variant:"outline",onClick:()=>s.push("/user/home"),children:"繼續購物"}),B.isVisible&&(0,l.jsxs)("div",{className:"w-full grid grid-cols-2 gap-2",children:[(0,l.jsxs)(n.$,{variant:"outline",className:"w-full",children:[(0,l.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"撥打電話"]}),(0,l.jsxs)(n.$,{variant:"outline",className:"w-full",onClick:()=>T("chat"),children:[(0,l.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"傳送訊息"]})]})]})]})})]}),(0,l.jsx)(f,{open:y,onOpenChange:E})]})}},8564:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(9946).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},9474:(e,s,a)=>{"use strict";a.d(s,{T:()=>i});var l=a(5155),r=a(2115),t=a(3999);let i=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)("textarea",{className:(0,t.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...r})});i.displayName="Textarea"},9840:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>x,Es:()=>h,L3:()=>u,c7:()=>o,lG:()=>d,rr:()=>j});var l=a(5155),r=a(2115),t=a(5452),i=a(4416),n=a(3999);let d=t.bL;t.l9;let c=t.ZL;t.bm;let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(t.hJ,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});m.displayName=t.hJ.displayName;let x=r.forwardRef((e,s)=>{let{className:a,children:r,...d}=e;return(0,l.jsxs)(c,{children:[(0,l.jsx)(m,{}),(0,l.jsxs)(t.UC,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[r,(0,l.jsxs)(t.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,l.jsx)(i.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=t.UC.displayName;let o=e=>{let{className:s,...a}=e;return(0,l.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};o.displayName="DialogHeader";let h=e=>{let{className:s,...a}=e;return(0,l.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};h.displayName="DialogFooter";let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(t.hE,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});u.displayName=t.hE.displayName;let j=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)(t.VY,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});j.displayName=t.VY.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[9352,4052,6766,8250,2328,9032,8441,1684,7358],()=>s(5024)),_N_E=e.O()}]);