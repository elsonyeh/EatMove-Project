(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5794],{1976:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},3952:(e,t,r)=>{"use strict";r.d(t,{M:()=>a});var s=r(2115);function a(e,t){let[r,a]=(0,s.useState)(()=>{try{let r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(e){return console.error(e),t}});return(0,s.useEffect)(()=>{let t=t=>{t.key===e&&t.newValue&&a(JSON.parse(t.newValue))};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[e]),[r,t=>{try{let s=t instanceof Function?t(r):t;a(s),window.localStorage.setItem(e,JSON.stringify(s))}catch(e){console.error(e)}}]}},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(2596),a=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},4186:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4516:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},4870:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},5457:(e,t,r)=>{Promise.resolve().then(r.bind(r,6549))},6549:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(5155),a=r(2115),n=r(7781),i=r(6937),l=r(7918),o=r(7737),c=r(4186),d=r(7924),u=r(7168),m=r(5695);function h(){let e=(0,m.useRouter)(),{recentViews:t,isLoaded:r}=(0,i.d)(),{favorites:h,isLoaded:x}=(0,l.r)(),[f,v]=(0,a.useState)(!0),[g,p]=(0,a.useState)("");(0,a.useEffect)(()=>{if(r&&x){let e=setTimeout(()=>{v(!1)},600);return()=>clearTimeout(e)}},[r,x]);let b=g?t.filter(e=>e.name.toLowerCase().includes(g.toLowerCase())||e.cuisine.toLowerCase().includes(g.toLowerCase())):t;return(0,s.jsxs)("div",{className:"container py-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(c.A,{className:"h-6 w-6 text-brand-primary mr-2"}),(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"近期瀏覽"})]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"您最近瀏覽過的店家"})]}),t.length>0&&(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)("input",{type:"search",placeholder:"搜尋近期瀏覽...",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-input focus:outline-none focus:ring-2 focus:ring-brand-primary",value:g,onChange:e=>p(e.target.value)})]})}),f?(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[,,,,].fill(0).map((e,t)=>(0,s.jsxs)("div",{className:"rounded-xl overflow-hidden",children:[(0,s.jsx)(o.E,{className:"h-48 w-full"}),(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsx)(o.E,{className:"h-6 w-3/4"}),(0,s.jsx)(o.E,{className:"h-4 w-full"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.E,{className:"h-4 w-1/4"}),(0,s.jsx)(o.E,{className:"h-4 w-1/4"})]})]})]},t))}):b.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:b.map(e=>(0,s.jsx)(n.g,{restaurant:e,isFavorite:h.some(t=>t.id===e.id)},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("h2",{className:"text-xl font-medium mb-2",children:"您還沒有瀏覽過任何店家"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"開始探索附近的美食吧！"}),(0,s.jsx)(u.$,{onClick:()=>e.push("/user/home"),className:"bg-brand-primary hover:bg-brand-primary/90",children:"探索餐廳"})]})]})}},6937:(e,t,r)=>{"use strict";r.d(t,{d:()=>n});var s=r(2115),a=r(3952);function n(){let[e,t]=(0,a.M)("eatmove-recent-views",[]),[r,n]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{n(!0)},[]),{recentViews:e,addRecentView:e=>{r&&t(t=>{let r=t.filter(t=>t.id!==e.id);return[e,...r].slice(0,10)})},clearRecentViews:()=>{r&&t([])},isLoaded:r}}},7168:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var s=r(5155),a=r(2115),n=r(9708),i=r(2085),l=r(3999);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:r})),ref:t,...d})});c.displayName="Button"},7737:(e,t,r)=>{"use strict";r.d(t,{E:()=>n});var s=r(5155),a=r(3999);function n(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",t),...r})}},7781:(e,t,r)=>{"use strict";r.d(t,{g:()=>g});var s=r(5155),a=r(6874),n=r.n(a),i=r(6766),l=r(1976),o=r(8564),c=r(4186),d=r(4516),u=r(4870),m=r(3999),h=r(2115),x=r(7918),f=r(8145),v=r(9269);function g(e){let{restaurant:t,isFavorite:r}=e,{id:a,name:g,cuisine:p,rating:b,deliveryTime:y,distance:j,minimumOrder:w,deliveryFee:N,isNew:k,description:A,coverImage:E}=t,{addFavorite:S,removeFavorite:C}=(0,x.r)(),[M,z]=(0,h.useState)(r),[L,_]=(0,h.useState)(!1);return(0,s.jsx)(n(),{href:"/user/restaurant/".concat(a),children:(0,s.jsxs)("div",{className:"group relative bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all duration-300 h-full flex flex-col transform hover:-translate-y-1",onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:[(0,s.jsxs)("div",{className:"relative overflow-hidden aspect-[4/3]",children:[(0,s.jsx)(i.default,{src:(0,v.b8)(g)||"/placeholder.svg",alt:g,fill:!0,className:"object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy",sizes:"(max-width: 640px) 100vw, (max-width: 768px) 50vw, (max-width: 1024px) 33vw, 25vw"}),(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),M?C(a):S(t),z(!M)},className:"absolute top-3 right-3 p-2 bg-white/90 backdrop-blur-sm rounded-full shadow-md z-10 transition-transform duration-200 hover:scale-110","aria-label":M?"從收藏移除":"加入收藏",children:(0,s.jsx)(l.A,{size:18,className:(0,m.cn)("transition-colors duration-200",M?"fill-red-500 text-red-500":"text-gray-600")})}),k&&(0,s.jsx)("div",{className:"absolute top-3 left-3 z-10",children:(0,s.jsx)(f.E,{className:"bg-green-500 hover:bg-green-600 text-white font-medium px-2.5 py-1",children:"新店"})}),(0,s.jsxs)("div",{className:"absolute bottom-3 left-3 flex items-center bg-white/90 backdrop-blur-sm px-2 py-1 rounded-md shadow-sm",children:[(0,s.jsx)(o.A,{className:"h-3.5 w-3.5 text-yellow-500 fill-yellow-500 mr-1"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:b})]}),(0,s.jsx)("div",{className:"absolute bottom-3 right-3",children:(0,s.jsx)(f.E,{variant:"outline",className:"bg-white/90 backdrop-blur-sm border-none text-gray-700",children:p})})]}),(0,s.jsxs)("div",{className:"p-4 flex-1 flex flex-col",children:[(0,s.jsx)("div",{className:"flex justify-between items-start mb-1",children:(0,s.jsx)("h3",{className:"font-bold text-lg line-clamp-1 group-hover:text-brand-primary transition-colors",children:g})}),(0,s.jsx)("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3 flex-1",children:A||"提供各種美味".concat(p,"，滿足您的味蕾")}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[(0,s.jsx)(c.A,{className:"h-3.5 w-3.5 mr-1.5"}),(0,s.jsx)("span",{children:y}),(0,s.jsx)("span",{className:"mx-2",children:"•"}),(0,s.jsx)(d.A,{className:"h-3.5 w-3.5 mr-1.5"}),(0,s.jsx)("span",{children:j})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm pt-2 border-t border-gray-100",children:[(0,s.jsxs)("span",{className:"font-medium",children:["最低消費 $",w]}),(0,s.jsxs)("span",{className:"text-gray-500",children:["外送費 $",N]})]}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",children:(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full shadow-md flex items-center font-medium text-brand-primary",children:[(0,s.jsx)("span",{children:"查看詳情"}),(0,s.jsx)(u.A,{className:"ml-1 h-4 w-4"})]})})]})]})})}},7918:(e,t,r)=>{"use strict";r.d(t,{r:()=>n});var s=r(2115),a=r(3952);function n(){let[e,t]=(0,a.M)("eatmove-favorites",[]),[r,n]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{n(!0)},[]),{favorites:e,addFavorite:s=>{r&&!e.some(e=>e.id===s.id)&&t([...e,s])},removeFavorite:s=>{r&&t(e.filter(e=>e.id!==s))},isFavorite:t=>e.some(e=>e.id===t),isLoaded:r}}},7924:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8145:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var s=r(5155);r(2115);var a=r(2085),n=r(3999);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...a})}},8564:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},9269:(e,t,r)=>{"use strict";function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return arguments.length>3&&void 0!==arguments[3]&&arguments[3],"/placeholder.svg?height=".concat(r,"&width=").concat(t,"&text=").concat(encodeURIComponent(e))}function a(e){return s(e,300,200)}function n(e){return s(e,100,100)}function i(e){return s(e,40,40)}r.d(t,{Ah:()=>n,b8:()=>a,dM:()=>i})}},e=>{var t=t=>e(e.s=t);e.O(0,[9352,6766,6441,8441,1684,7358],()=>t(5457)),_N_E=e.O()}]);